<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css"
</head>

<body>
    <h1>C0debreaker V2.6</h1>
    <br><br>



<div class="leftColumn">
    <!--Input/output for encoding-->
    <form>
        <input id="encodeInput" type="text" maxlength="200" placeholder="Insert text to encode here!" size="20" />
        <input type="button" onclick="hexEncode()" value="Encode" class="button"> </button>
        <br>
        Output:
        <br>
    </form>

    <div class="outputArea">
        <p id="encodeOutput"> 
            <br><br>
        </p>
    </div>

    <!--Input/output for decoding-->
    <form>
        <input id="decodeInput" type="text" maxlength="200" placeholder="Insert text to decode here!" size="20" />
        <input type="button" onclick="hexDecode()" value="Decode" class="button"> </button>
        <br>
        Output:
        <br>
    </form>

    <div class="outputArea">
        <p id="decodeOutput">
        
            <br><br>
        </p>
    </div>
</div>


<div class="middleColumn">
    <!--Radio button for selecting a cipher-->
    <p>Please select a cipher to begin</p>
        <input type="radio" id="Binary" name="selectedCipher" value="Binary">
        <input type="radio" id="Hex" name="selectedCipher" value="Hex">

    <!--Binary, Hex, Morse, Caesar, Vigenere, Affine-->
</div>

<div class="rightColumn">
    <h2>
        [Selected Cipher]
    </h2>
    <p>
        Cipher description
    </p>
</div>

</body>

<script>
    function binDecode() {
        let binaryValue = String(document.querySelector("#decodeInput").value);
        let baseTenValue = 0;
        let place = 0;
        let output = document.querySelector("#decodeOutput");

        //iterate through the binary string backwards
        for (let i = binaryValue.length - 1; i >= 0; i--) {
            //store the bit being examined
            let currentBit = binaryValue.charAt(i);
            //make sure the bit is a 0 or 1
            if (currentBit !== "0" && currentBit !== "1") {
                output.innerHTML = "Incorrect input, please try again";
                return;
            } else if (currentBit === "1") {
                baseTenValue += Math.pow(2, place);
            }
            //increment the bit being examined
            place++;
        }

        try {
            output.innerHTML = String(baseTenValue);
        } catch (e) {
            output.innerHTML = "Incorrect input, please try again";
            return;
        }
    }

    function binEncode() {
        let baseTenValue = document.querySelector("#encodeInput").value;
        let value = 0;
        let output = document.querySelector("#encodeOutput");
        //make sure input is valid
        if (isNaN(parseInt(baseTenValue)) || parseInt(baseTenValue) < 0) {
            output.innerHTML = "Incorrect input, please try again";
            return;
        } else {
            value = parseInt(baseTenValue);
        }
        let binaryValue = "";
        let tempVal;
        let tempStr = "";

        //iteratively divide the input by 2
        while (value !== 0) {
            tempVal = value;
            value = Math.floor(value / 2);
            //decide if the bit added should be a 1 or a zero
            if ((value * 2) === tempVal) {
                tempStr = "0";
            } else {
                tempStr = "1";
            }
            //add the bit to the beginning of the string
            tempStr += binaryValue;
            binaryValue = tempStr;
        }

        output.innerHTML = binaryValue;
    }

    function hexEncode() {
        let input = document.querySelector("#encodeInput").value;
        let value = 0;
        let output = document.querySelector("#encodeOutput");
        //make sure input is valid
        if(isNaN(parseInt(input)) || parseInt(input) < 0) {
            output.innerHTML = "Incorrect input, please try again";
            return;
        } else {
            value = parseInt(input);
        }
        let hexValue = "";
        let tempVal;
        let tempStr = "";

        //iteratively divide the input by 16
        while (value !== 0) {
            tempVal = value;
            value = Math.floor(value / 16);
            //decide if the hex digit added should be a 0-9 or a-f
            if ((value * 16) === tempVal) {
                tempStr = "0";
            } else {
                let remainder = tempVal % 16;
                if (remainder < 10) {
                    tempStr = remainder.toString();
                } else {
                    tempStr = String.fromCharCode(87 + remainder);
                    tempStr = tempStr.toUpperCase();
                }
            }
            //add the hex digit to the beginning of the string
            tempStr += hexValue;
            hexValue = tempStr;
        }

        output.innerHTML = hexValue;
    }

    function hexDecode() {
        let input = document.querySelector("#decodeInput").value;
        let output = document.querySelector("#decodeOutput");
        let baseTenValue = 0;
        let place = 0;
        input = input.toString();
        input = input.toUpperCase();

        //iterate through the hex string backwards
        for (let i = input.length - 1; i >= 0; i--) {
            //store the hex digit being examined
            let currentDigit = input.charAt(i);
            //make sure the hex digit is a 0-9 or A-F
            if (currentDigit < "0" || (currentDigit > "9" && currentDigit < "A") || currentDigit > "F") {
                output.innerHTML = "Incorrect input, please try again";
                return;
            } else {
                let digitValue = 0;
                if (currentDigit < "A") {
                    digitValue = parseInt(currentDigit);
                } else {
                    digitValue = currentDigit.charCodeAt(0) - 55;
                }
            baseTenValue += digitValue * Math.pow(16, place);
         }
            //increment the hex digit being examined
            place++;
        }

        try {
            output.innerHTML = String(baseTenValue);
        } catch (e) {
            output.innerHTML = "Incorrect input, please try again";
            return;
        }
}
</script>

</html>